{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\del.sistemas_res\\\\Documents\\\\Proj\\\\agenda\\\\agenda-medica\\\\src\\\\components\\\\AppointmentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { db } from \"./firebase\"; // Asegúrate de importar tu configuración de Firebase\nimport { collection, getDocs, addDoc, updateDoc, deleteDoc, doc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppointmentForm = () => {\n  _s();\n  const [appointments, setAppointments] = useState([]);\n  const [date, setDate] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [patient, setPatient] = useState(\"\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [editingAppointment, setEditingAppointment] = useState(null);\n  useEffect(() => {\n    fetchAppointments();\n  }, []);\n  const fetchAppointments = async () => {\n    const querySnapshot = await getDocs(collection(db, \"appointments\"));\n    const appointmentsList = [];\n    querySnapshot.forEach(doc => {\n      appointmentsList.push({\n        id: doc.id,\n        ...doc.data()\n      });\n    });\n    setAppointments(appointmentsList);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (editingAppointment) {\n      handleUpdate(e);\n    } else {\n      try {\n        const docRef = await addDoc(collection(db, \"appointments\"), {\n          date: date,\n          time: time,\n          patient: patient\n        });\n        console.log(\"Cita guardada con ID: \", docRef.id);\n      } catch (e) {\n        console.error(\"Error al guardar la cita: \", e);\n      }\n    }\n    setDate(\"\");\n    setTime(\"\");\n    setPatient(\"\");\n  };\n  const handleUpdate = async e => {\n    e.preventDefault();\n    if (!editingAppointment) return;\n    const appointmentRef = doc(db, \"appointments\", editingAppointment.id);\n    try {\n      await updateDoc(appointmentRef, {\n        date: date,\n        time: time,\n        patient: patient\n      });\n      setEditingAppointment(null);\n      fetchAppointments(); // Vuelve a obtener citas después de actualizar\n    } catch (error) {\n      console.error(\"Error al actualizar la cita: \", error);\n    }\n  };\n  const handleDelete = async appointmentId => {\n    const appointmentRef = doc(db, \"appointments\", appointmentId);\n    try {\n      await deleteDoc(appointmentRef);\n      fetchAppointments(); // Vuelve a obtener citas después de eliminar\n    } catch (error) {\n      console.error(\"Error al eliminar la cita: \", error);\n    }\n  };\n  const handleSearch = e => {\n    setSearchTerm(e.target.value);\n  };\n  const filteredAppointments = appointments.filter(appointment => appointment.patient.toLowerCase().includes(searchTerm.toLowerCase()));\n  const handleEdit = appointment => {\n    setEditingAppointment(appointment);\n    setDate(appointment.date);\n    setTime(appointment.time);\n    setPatient(appointment.patient);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Buscar por nombre del paciente\",\n      value: searchTerm,\n      onChange: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        value: date,\n        onChange: e => setDate(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"time\",\n        value: time,\n        onChange: e => setTime(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Nombre del paciente\",\n        value: patient,\n        onChange: e => setPatient(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: editingAppointment ? \"Actualizar\" : \"Agregar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: filteredAppointments.map(appointment => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: appointment.patient\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: appointment.date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: appointment.time\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleEdit(appointment),\n          children: \"Editar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(appointment.id),\n          children: \"Eliminar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)]\n      }, appointment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n_s(AppointmentForm, \"5ea4kU37YE7gLLoAOzSUrR+Fzn4=\");\n_c = AppointmentForm;\nexport default AppointmentForm;\nvar _c;\n$RefreshReg$(_c, \"AppointmentForm\");","map":{"version":3,"names":["React","useState","useEffect","db","collection","getDocs","addDoc","updateDoc","deleteDoc","doc","jsxDEV","_jsxDEV","AppointmentForm","_s","appointments","setAppointments","date","setDate","time","setTime","patient","setPatient","searchTerm","setSearchTerm","editingAppointment","setEditingAppointment","fetchAppointments","querySnapshot","appointmentsList","forEach","push","id","data","handleSubmit","e","preventDefault","handleUpdate","docRef","console","log","error","appointmentRef","handleDelete","appointmentId","handleSearch","target","value","filteredAppointments","filter","appointment","toLowerCase","includes","handleEdit","children","type","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","map","onClick","_c","$RefreshReg$"],"sources":["C:/Users/del.sistemas_res/Documents/Proj/agenda/agenda-medica/src/components/AppointmentForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { db } from \"./firebase\"; // Asegúrate de importar tu configuración de Firebase\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n} from \"firebase/firestore\";\r\n\r\nconst AppointmentForm = () => {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [date, setDate] = useState(\"\");\r\n  const [time, setTime] = useState(\"\");\r\n  const [patient, setPatient] = useState(\"\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [editingAppointment, setEditingAppointment] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchAppointments();\r\n  }, []);\r\n\r\n  const fetchAppointments = async () => {\r\n    const querySnapshot = await getDocs(collection(db, \"appointments\"));\r\n    const appointmentsList = [];\r\n    querySnapshot.forEach((doc) => {\r\n      appointmentsList.push({ id: doc.id, ...doc.data() });\r\n    });\r\n    setAppointments(appointmentsList);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (editingAppointment) {\r\n      handleUpdate(e);\r\n    } else {\r\n      try {\r\n        const docRef = await addDoc(collection(db, \"appointments\"), {\r\n          date: date,\r\n          time: time,\r\n          patient: patient,\r\n        });\r\n        console.log(\"Cita guardada con ID: \", docRef.id);\r\n      } catch (e) {\r\n        console.error(\"Error al guardar la cita: \", e);\r\n      }\r\n    }\r\n    setDate(\"\");\r\n    setTime(\"\");\r\n    setPatient(\"\");\r\n  };\r\n\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    if (!editingAppointment) return;\r\n\r\n    const appointmentRef = doc(db, \"appointments\", editingAppointment.id);\r\n    try {\r\n      await updateDoc(appointmentRef, {\r\n        date: date,\r\n        time: time,\r\n        patient: patient,\r\n      });\r\n      setEditingAppointment(null);\r\n      fetchAppointments(); // Vuelve a obtener citas después de actualizar\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar la cita: \", error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (appointmentId) => {\r\n    const appointmentRef = doc(db, \"appointments\", appointmentId);\r\n    try {\r\n      await deleteDoc(appointmentRef);\r\n      fetchAppointments(); // Vuelve a obtener citas después de eliminar\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar la cita: \", error);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const filteredAppointments = appointments.filter((appointment) =>\r\n    appointment.patient.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const handleEdit = (appointment) => {\r\n    setEditingAppointment(appointment);\r\n    setDate(appointment.date);\r\n    setTime(appointment.time);\r\n    setPatient(appointment.patient);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Buscar por nombre del paciente\"\r\n        value={searchTerm}\r\n        onChange={handleSearch}\r\n      />\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"date\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"time\"\r\n          value={time}\r\n          onChange={(e) => setTime(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nombre del paciente\"\r\n          value={patient}\r\n          onChange={(e) => setPatient(e.target.value)}\r\n        />\r\n        <button type=\"submit\">\r\n          {editingAppointment ? \"Actualizar\" : \"Agregar\"}\r\n        </button>\r\n      </form>\r\n      <div>\r\n        {filteredAppointments.map((appointment) => (\r\n          <div key={appointment.id}>\r\n            <p>{appointment.patient}</p>\r\n            <p>{appointment.date}</p>\r\n            <p>{appointment.time}</p>\r\n            <button onClick={() => handleEdit(appointment)}>Editar</button>\r\n            <button onClick={() => handleDelete(appointment.id)}>\r\n              Eliminar\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppointmentForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}